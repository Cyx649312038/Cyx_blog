<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cyx～</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/cyx_blog/assets/images/pageLogo.png">
    <meta name="description" content="用于平时学习记录的笔记文档">
    <meta name="author" content="cyx">
    <meta name="Keywords" content="个人笔记">
    
    <link rel="preload" href="/cyx_blog/assets/css/0.styles.3178a8c9.css" as="style"><link rel="preload" href="/cyx_blog/assets/js/app.ebd8d218.js" as="script"><link rel="preload" href="/cyx_blog/assets/js/2.080a46d6.js" as="script"><link rel="preload" href="/cyx_blog/assets/js/32.9da046ff.js" as="script"><link rel="prefetch" href="/cyx_blog/assets/js/10.d187e49f.js"><link rel="prefetch" href="/cyx_blog/assets/js/11.bfac635a.js"><link rel="prefetch" href="/cyx_blog/assets/js/12.167a9869.js"><link rel="prefetch" href="/cyx_blog/assets/js/13.5e1ef22e.js"><link rel="prefetch" href="/cyx_blog/assets/js/14.266321ac.js"><link rel="prefetch" href="/cyx_blog/assets/js/15.a0db7f52.js"><link rel="prefetch" href="/cyx_blog/assets/js/16.c3bd7f75.js"><link rel="prefetch" href="/cyx_blog/assets/js/17.850a33d5.js"><link rel="prefetch" href="/cyx_blog/assets/js/18.03baacf6.js"><link rel="prefetch" href="/cyx_blog/assets/js/19.e5ecc5cf.js"><link rel="prefetch" href="/cyx_blog/assets/js/20.84e71789.js"><link rel="prefetch" href="/cyx_blog/assets/js/21.0caa4d0f.js"><link rel="prefetch" href="/cyx_blog/assets/js/22.cd5e3d76.js"><link rel="prefetch" href="/cyx_blog/assets/js/23.de7b4abf.js"><link rel="prefetch" href="/cyx_blog/assets/js/24.902ad754.js"><link rel="prefetch" href="/cyx_blog/assets/js/25.4982f003.js"><link rel="prefetch" href="/cyx_blog/assets/js/26.b26cd10d.js"><link rel="prefetch" href="/cyx_blog/assets/js/27.0b792ce1.js"><link rel="prefetch" href="/cyx_blog/assets/js/28.9270dd34.js"><link rel="prefetch" href="/cyx_blog/assets/js/29.5dc2abbe.js"><link rel="prefetch" href="/cyx_blog/assets/js/3.321db5fe.js"><link rel="prefetch" href="/cyx_blog/assets/js/30.718bae68.js"><link rel="prefetch" href="/cyx_blog/assets/js/31.964cb332.js"><link rel="prefetch" href="/cyx_blog/assets/js/33.f9e6634f.js"><link rel="prefetch" href="/cyx_blog/assets/js/34.34ac8e0c.js"><link rel="prefetch" href="/cyx_blog/assets/js/35.a763a0be.js"><link rel="prefetch" href="/cyx_blog/assets/js/36.a890cb02.js"><link rel="prefetch" href="/cyx_blog/assets/js/37.1c7e8019.js"><link rel="prefetch" href="/cyx_blog/assets/js/38.a4ab6049.js"><link rel="prefetch" href="/cyx_blog/assets/js/39.1fd5ccb6.js"><link rel="prefetch" href="/cyx_blog/assets/js/4.0704d8fe.js"><link rel="prefetch" href="/cyx_blog/assets/js/40.fe6c7787.js"><link rel="prefetch" href="/cyx_blog/assets/js/41.5a66ba75.js"><link rel="prefetch" href="/cyx_blog/assets/js/42.1d56113a.js"><link rel="prefetch" href="/cyx_blog/assets/js/43.2f654199.js"><link rel="prefetch" href="/cyx_blog/assets/js/44.081f7e06.js"><link rel="prefetch" href="/cyx_blog/assets/js/45.d8c3fbd6.js"><link rel="prefetch" href="/cyx_blog/assets/js/46.f0175cde.js"><link rel="prefetch" href="/cyx_blog/assets/js/5.11b70e0a.js"><link rel="prefetch" href="/cyx_blog/assets/js/6.74c239f2.js"><link rel="prefetch" href="/cyx_blog/assets/js/7.67a47de0.js"><link rel="prefetch" href="/cyx_blog/assets/js/8.e668bce6.js"><link rel="prefetch" href="/cyx_blog/assets/js/9.086a537d.js">
    <link rel="stylesheet" href="/cyx_blog/assets/css/0.styles.3178a8c9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cyx_blog/" class="home-link router-link-active"><img src="/cyx_blog/assets/images/logo.png" alt="Cyx～" class="logo"> <span class="site-name can-hide">Cyx～</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cyx_blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/cyx_blog/bookReading/" class="nav-link router-link-active">
  bookReading
</a></div><div class="nav-item"><a href="/cyx_blog/typescript/" class="nav-link">
  typescript
</a></div><div class="nav-item"><a href="/cyx_blog/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/cyx_blog/project/" class="nav-link">
  project
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cyx_blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/cyx_blog/bookReading/" class="nav-link router-link-active">
  bookReading
</a></div><div class="nav-item"><a href="/cyx_blog/typescript/" class="nav-link">
  typescript
</a></div><div class="nav-item"><a href="/cyx_blog/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/cyx_blog/project/" class="nav-link">
  project
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/cyx_blog/bookReading/" class="sidebar-heading clickable router-link-active open"><span>前端书籍阅读</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/cyx_blog/bookReading/dont_know_js 01/" class="sidebar-heading clickable"><span>你不知道的JS(上)</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/cyx_blog/bookReading/dont_know_js 02/" class="sidebar-heading clickable"><span>你不知道的JS(中)</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/cyx_blog/bookReading/dont_know_js 03/" class="sidebar-heading clickable open"><span>你不知道的JS(下)</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html" class="active sidebar-link">1.语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#块作用域声明" class="sidebar-link">块作用域声明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#let" class="sidebar-link">let</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#const" class="sidebar-link">const</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#块作用域函数" class="sidebar-link">块作用域函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#spread-rest-展开运算符" class="sidebar-link">spread/rest(...展开运算符)</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#默认参数值" class="sidebar-link">默认参数值</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#解构" class="sidebar-link">解构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#对象属性赋值模式" class="sidebar-link">对象属性赋值模式</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#重复赋值" class="sidebar-link">重复赋值</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#解构赋值表达式" class="sidebar-link">解构赋值表达式</a></li></ul></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#更多用法" class="sidebar-link">更多用法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#默认值赋值" class="sidebar-link">默认值赋值</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#嵌套解构" class="sidebar-link">嵌套解构</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#解构参数" class="sidebar-link">解构参数</a></li></ul></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#对象字面量扩展" class="sidebar-link">对象字面量扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#简洁属性" class="sidebar-link">简洁属性</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#简洁方法" class="sidebar-link">简洁方法</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#计算属性名" class="sidebar-link">计算属性名</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#设定-prototype" class="sidebar-link">设定[[Prototype]]</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#super对象" class="sidebar-link">super对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#模版字面量" class="sidebar-link">模版字面量</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#箭头函数" class="sidebar-link">箭头函数</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#for-of循环" class="sidebar-link">for...of循环</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#正则表达式新特性" class="sidebar-link">正则表达式新特性</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#数字字面量拓展" class="sidebar-link">数字字面量拓展</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#unicode" class="sidebar-link">Unicode</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#符号-symbol" class="sidebar-link">符号（Symbol）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#符号注册" class="sidebar-link">符号注册</a></li><li class="sidebar-sub-header"><a href="/cyx_blog/bookReading/dont_know_js 03/01-grammar.html#作为对象属性的符号" class="sidebar-link">作为对象属性的符号</a></li></ul></li></ul></li><li><a href="/cyx_blog/bookReading/dont_know_js 03/02-codeOrganization.html" class="sidebar-link">2.代码组织</a></li><li><a href="/cyx_blog/bookReading/dont_know_js 03/03-asyncControl.html" class="sidebar-link">3.异步流控制</a></li><li><a href="/cyx_blog/bookReading/dont_know_js 03/04-collection.html" class="sidebar-link">4.集合 </a></li></ul></section></li><li><a href="/cyx_blog/bookReading/javaScriptRedBook/" class="sidebar-link">javaScript程序设计(第四版)</a></li><li><a href="/cyx_blog/bookReading/illustrateHttp/" class="sidebar-link">图解Http</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>ES6 新增了很多新的语法形式，需要我们去熟悉。本章我们将会介绍这些新的语法 形式，看看它们提供了哪些新东西</p> <h2 id="块作用域声明"><a href="#块作用域声明" class="header-anchor">#</a> 块作用域声明</h2> <h3 id="let"><a href="#let" class="header-anchor">#</a> let</h3> <p>和传统的var声明变量不同，不管出 现在什么位置，var 都是归属于包含它的整个函数作用域。let 声明归属于块作用域，但是 直到在块中出现才会被初始化。</p> <p>在 let 声明 / 初始化之前访问 let 声明的变量会导致错误，而使用 var 的话这个顺序是无 关紧要的(除了代码风格方面)。</p> <blockquote><p>let + for</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        funcs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
funcs<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 3</span>
</code></pre></div><p>for循环头部的let i不只为for循环本身声明了一个i，而是为循环的每一次迭代都重新 声明了一个新的 i。这意味着 loop 迭代内部创建的闭包封闭的是每次迭代中的变量，就像 期望的那样。</p> <p>如果试验同样的代码，只把 var i 放在 for 循环头部，得到的结果就会是 5 而不是 3，因 为在外层作用域中只有一个 i，这个 i 被封闭进去，而不是每个迭代的函数会封闭一个 新的 i。</p> <h3 id="const"><a href="#const" class="header-anchor">#</a> const</h3> <h3 id="块作用域函数"><a href="#块作用域函数" class="header-anchor">#</a> 块作用域函数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 可以这么做!</span>
    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ..</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//ReferenceError</span>
</code></pre></div><h2 id="spread-rest-展开运算符"><a href="#spread-rest-展开运算符" class="header-anchor">#</a> spread/rest(...展开运算符)</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// 1 2 3</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">...</span>a<span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4,5]</span>
</code></pre></div><p>... 的另外一种常见用法基本上可以被看作反向的行为;与把一个值展开不同，... 把一系 列值收集到一起成为一个数组。考虑:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span><span class="token operator">...</span>z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment">//1 2 [ 3, 4, 5, 6 ]</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//1 2 [ [ 3, 4, 5 ] ]</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>foo(..) 函数声明中的 ...args 通常称为“rest 参数”，因为这里是在收集其余的参数.</p></div> <p>这种用法最好的一点是，它为弃用很久的 arguments 数组——实际上它并不是真正的数 组，而是类似数组的对象——提供了一个非常可靠的替代形式。因为 args(或者随便你 给它起什么名字——很多人喜欢用 r 或 rest)是一个真正的数组，前 ES6 中有很多技巧 用来把 arguments 转变为某种我们可以当作数组来使用的东西，现在我们可以摆脱这些愚 蠢的技巧了。</p> <h2 id="默认参数值"><a href="#默认参数值" class="header-anchor">#</a> 默认参数值</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">31</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x <span class="token operator">+</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 42</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 11</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">42</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 42  &lt;-- 丢了undefined</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 36 </span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 36  &lt;-- 丢了undefined</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 5  &lt;-- null被强制转换为0</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 17</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 6  &lt;-- null被强制转换为0</span>
</code></pre></div><blockquote><p>默认值表达式</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;bar called!&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> y <span class="token operator">+</span> val<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> z <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span> x <span class="token punctuation">)</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> z <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;bar called&quot; 8,13</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;bar called&quot; 10,15</span>
y <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9,10</span>

</code></pre></div><p>注意函数声明中形式参数是在它们自己的作用域中(可以把它看 作是就在函数声明包裹的( .. )的作用域中)，而不是在函数体作用域中。这意味着在默 认值表达式中的标识符引用首先匹配到形式参数作用域，然后才会搜索外层作用域。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> w <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> z <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span> <span class="token parameter">x <span class="token operator">=</span> w <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> z <span class="token operator">=</span> z <span class="token operator">+</span> <span class="token number">1</span></span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 注意z = z + 1这里</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// ReferenceError</span>
</code></pre></div><h2 id="解构"><a href="#解构" class="header-anchor">#</a> 解构</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token punctuation">[</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> x<span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> y<span class="token punctuation">,</span> <span class="token literal-property property">z</span><span class="token operator">:</span> z <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">x</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token literal-property property">z</span><span class="token operator">:</span><span class="token number">6</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// 1 2 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// 4 5 6</span>
</code></pre></div><h3 id="对象属性赋值模式"><a href="#对象属性赋值模式" class="header-anchor">#</a> 对象属性赋值模式</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> bam<span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> baz<span class="token punctuation">,</span> <span class="token literal-property property">z</span><span class="token operator">:</span> bap <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">x</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token literal-property property">z</span><span class="token operator">:</span><span class="token number">6</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> bam<span class="token punctuation">,</span> baz<span class="token punctuation">,</span> bap <span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 4 5 6</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// ReferenceError</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span> y<span class="token punctuation">,</span> x <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span> x<span class="token punctuation">,</span> y <span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 20 10</span>
</code></pre></div><h3 id="重复赋值"><a href="#重复赋值" class="header-anchor">#</a> 重复赋值</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token constant">X</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token constant">Y</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token constant">Z</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">X</span><span class="token punctuation">,</span> <span class="token constant">Y</span><span class="token punctuation">,</span> <span class="token constant">Z</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{ x: 1, y: 2 } 1 2</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token constant">X</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token constant">Y</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">Z</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">X</span><span class="token punctuation">,</span><span class="token constant">Y</span><span class="token punctuation">,</span><span class="token constant">Z</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[ 1 ] [ 1 ] 1</span>
</code></pre></div><h3 id="解构赋值表达式"><a href="#解构赋值表达式" class="header-anchor">#</a> 解构赋值表达式</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span><span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> p<span class="token punctuation">;</span>
p <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">}</span> <span class="token operator">=</span> o<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 1 2 3</span>
p <span class="token operator">===</span> o<span class="token punctuation">;</span>                        <span class="token comment">// true</span>


<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> p<span class="token punctuation">;</span>
p <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">}</span> <span class="token operator">=</span> o<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1 2 3 </span>
p <span class="token operator">===</span> o<span class="token punctuation">;</span>  <span class="token comment">// true</span>


<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span><span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
p <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">;</span>
<span class="token punctuation">(</span> <span class="token punctuation">{</span>a<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>b<span class="token punctuation">,</span>c<span class="token punctuation">}</span> <span class="token operator">=</span> o <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1 2 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 4 5 4</span>
 
</code></pre></div><h2 id="更多用法"><a href="#更多用法" class="header-anchor">#</a> 更多用法</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> <span class="token punctuation">[</span>c<span class="token punctuation">,</span><span class="token operator">...</span>d<span class="token punctuation">]</span> <span class="token operator">=</span> a
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1 [ 2, 3 ]</span>
</code></pre></div><h3 id="默认值赋值"><a href="#默认值赋值" class="header-anchor">#</a> 默认值赋值</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token punctuation">[</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token number">12</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> z <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">,</span> w <span class="token operator">=</span> <span class="token number">20</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d <span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 1 2 3 12</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> w <span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 4 5 6 20</span>


<span class="token comment">//bar {x:4, y: 5, z:6}中没有w 所以用默认赋值WW = 20</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token constant">WW</span> <span class="token operator">=</span> <span class="token number">20</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> <span class="token constant">WW</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 4 5 6 20</span>

</code></pre></div><h3 id="嵌套解构"><a href="#嵌套解构" class="header-anchor">#</a> 嵌套解构</h3> <p>关键理解 source -&gt; target模式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">z</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token punctuation">[</span> a<span class="token punctuation">,</span> <span class="token punctuation">[</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d <span class="token punctuation">]</span><span class="token punctuation">,</span> e <span class="token punctuation">]</span> <span class="token operator">=</span> a1<span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">z</span><span class="token operator">:</span> w <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> o1<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 1 2 3 4 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> w <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>

</code></pre></div><h3 id="解构参数"><a href="#解构参数" class="header-anchor">#</a> 解构参数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span> <span class="token parameter"><span class="token punctuation">[</span> x<span class="token punctuation">,</span> y <span class="token punctuation">]</span></span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1 2</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1 undefined</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// undefined undefined</span>
<span class="token comment">// 参数的对象解构也是可以的:</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span> <span class="token parameter"><span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span></span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2 1</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// undefined 42</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// undefined undefined</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f6</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> x <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">f6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                               <span class="token comment">// 10 10</span>
<span class="token function">f6</span><span class="token punctuation">(</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10 undefined</span>
</code></pre></div><h2 id="对象字面量扩展"><a href="#对象字面量扩展" class="header-anchor">#</a> 对象字面量扩展</h2> <h3 id="简洁属性"><a href="#简洁属性" class="header-anchor">#</a> 简洁属性</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">3</span>
o<span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">,</span>
    y 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="简洁方法"><a href="#简洁方法" class="header-anchor">#</a> 简洁方法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">x</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">// .. </span>
    <span class="token punctuation">}</span> <span class="token punctuation">,</span>
    <span class="token function-variable function">y</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// ..</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>

<span class="token comment">//es6中的写法</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>简洁方法意味着匿名函数表达式。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token function">something</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&gt;</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">something</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span>x<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">something</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//ReferenceError: something is not defined</span>
</code></pre></div><p>所以对于简洁方法能得出什么结论呢?它们简洁方便。但是应该只在不需要它们执行递 归或者事件绑定/解绑定的时候使用。否则的话，就按照老式的something: function something(..) 方法来定义吧。</p> <h3 id="计算属性名"><a href="#计算属性名" class="header-anchor">#</a> 计算属性名</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> prefix <span class="token operator">=</span> <span class="token string">&quot;user_&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">baz</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span><span class="token punctuation">.</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span> prefix <span class="token operator">+</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span><span class="token punctuation">.</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span> prefix <span class="token operator">+</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span><span class="token punctuation">.</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="设定-prototype"><a href="#设定-prototype" class="header-anchor">#</a> 设定[[Prototype]]</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// ..</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">__proto__</span><span class="token operator">:</span> o1<span class="token punctuation">,</span>
<span class="token comment">// .. </span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>o2 通过普通的对象字面量声明，但是它也 [[Prototype]] 连接到了 o1。这里的 <strong>proto</strong> 属性名也可以是字符串 &quot;<strong>proto</strong>&quot;，但是注意它不能是计算属性名结果(参见前一节)。
退一步讲，对 <strong>proto</strong> 的使用是有争议的。它是 JavaScript 多年前的属性扩展，最后被 ES6 标准化，但似乎标准化得不情不愿。许多开发者认为不应该使用它。实际上，它是在 ES6 的“附录 B”中出现的，这一部分列出的都是 JavaScript 只因兼容性问题不得不标准 化的特性。</p> <h3 id="super对象"><a href="#super对象" class="header-anchor">#</a> super对象</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'o1.foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'o2.foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>o2<span class="token punctuation">,</span>o1<span class="token punctuation">)</span>
o2<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//o1.foo  o2.foo</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>super 只允许在简洁方法中出现，而不允许在普通函数表达式属性中出 现。也只允许以 super.XXX 的形式(用于属性 / 方法访问)出现，而不能以 super() 的形式出现</p></div> <h2 id="模版字面量"><a href="#模版字面量" class="header-anchor">#</a> 模版字面量</h2> <h2 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h2> <p>不只是更短的语法，而是 this</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">f1</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(this);</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports <span class="token operator">===</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true </span>
</code></pre></div><h2 id="for-of循环"><a href="#for-of循环" class="header-anchor">#</a> for...of循环</h2> <p>ES6 在把 JavaScript 中我们熟悉的 for 和 for..in 循环组合起来的基础上，又新增了一个for..of 循环，在迭代器产生的一系列值上循环。</p> <p>for..of 循环的值必须是一个 iterable，或者说它必须是可以转换 / 封箱到一个 iterable 对象 的值(参见本系列《你不知道的 JavaScript(中卷)》第一部分)。iterable 就是一个能够产 生迭代器供循环使用的对象。</p> <p>我们来对比一下 for..of 和 for..in 以展示其中的区别:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> idx <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> idx <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 0 1 2 3 4</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> val <span class="token keyword">of</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> val <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</span>
</code></pre></div><p>下面是前面代码中的前 ES6 版本的 for..of 形式:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
k <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> val<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    val <span class="token operator">=</span> a<span class="token punctuation">[</span> k<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> val <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</span>
</code></pre></div><p>这里是 ES6 的但是不用 for..of 的等价代码，也可以用来展示如何手动在迭代器上迭代</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> val<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> it <span class="token operator">=</span> a<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">(</span>ret <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>ret<span class="token punctuation">.</span>done<span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">{</span>
val <span class="token operator">=</span> ret<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> val <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>JavaScript 中默认为(或提供)iterable 的标准内建值包括:</p> <ul><li>Arrays</li> <li>Strings</li> <li>Generators</li> <li>Collections / TypedArrays</li></ul></div> <p>在for (XYZ of ABC)..中，和for以及for..in循环中的语句一样，XYZ语句可以是赋值 表达式也可以是声明。所以可以这么做:</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">for</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>a <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> o<span class="token punctuation">.</span>a <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1 2 3</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> o<span class="token punctuation">.</span>a<span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> o<span class="token punctuation">.</span>a <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1 2 3</span>
</code></pre></div><p>和其他循环一样，for..of 循环也可以通过 break、continue、return(如果在函数中的 话)提前终止，并抛出异常。在所有这些情况中，如果需要的话，都会自动调用迭代器的 return(..) 函数(如果存在的话)让迭代器执行清理工作。</p> <h2 id="正则表达式新特性"><a href="#正则表达式新特性" class="header-anchor">#</a> 正则表达式新特性</h2> <h2 id="数字字面量拓展"><a href="#数字字面量拓展" class="header-anchor">#</a> 数字字面量拓展</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// es6之前</span>
<span class="token keyword">var</span> dec <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span>
    oct <span class="token operator">=</span> <span class="token number">052</span><span class="token punctuation">,</span> <span class="token comment">//42</span>
    hex <span class="token operator">=</span> <span class="token number">0x2a</span> <span class="token comment">//42</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dec<span class="token punctuation">,</span> oct<span class="token punctuation">,</span> hex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">Number</span><span class="token punctuation">(</span> <span class="token string">&quot;42&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 42</span>
<span class="token function">Number</span><span class="token punctuation">(</span> <span class="token string">&quot;052&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 52</span>
<span class="token function">Number</span><span class="token punctuation">(</span> <span class="token string">&quot;0x2a&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 42</span>

<span class="token comment">// es6</span>
<span class="token keyword">var</span> dec <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span>
    oct <span class="token operator">=</span> <span class="token number">0o52</span><span class="token punctuation">,</span>
    hex <span class="token operator">=</span> <span class="token number">0x2a</span><span class="token punctuation">,</span>
    bin <span class="token operator">=</span> <span class="token number">0b101010</span><span class="token punctuation">;</span>

<span class="token function">Number</span><span class="token punctuation">(</span> <span class="token string">&quot;42&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//42</span>
<span class="token function">Number</span><span class="token punctuation">(</span> <span class="token string">&quot;0o52&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//42</span>
<span class="token function">Number</span><span class="token punctuation">(</span> <span class="token string">&quot;0x2a&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//42</span>
<span class="token function">Number</span><span class="token punctuation">(</span> <span class="token string">&quot;0b101010&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//42</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;42&quot;--也可以用a.toString( 10 )</span>
a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span> <span class="token number">8</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;52&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span> <span class="token number">16</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;2a&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;101010&quot;</span>

</code></pre></div><h2 id="unicode"><a href="#unicode" class="header-anchor">#</a> Unicode</h2> <h2 id="符号-symbol"><a href="#符号-symbol" class="header-anchor">#</a> 符号（Symbol）</h2> <p>ES6 为 JavaScript 引入了一个新的原生类型:symbol，这是很久没有发生过的事情。但是，和其他原生类型不一样，symbol 没有字面量形式。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span> <span class="token string">&quot;some optional description&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> sym<span class="token punctuation">;</span>     <span class="token comment">// &quot;symbol&quot;</span>
</code></pre></div><p>以下几点需要注意。</p> <ul><li>不能也不应该对 Symbol(..) 使用 new。它并不是一个构造器，也不会创建一个对象。</li> <li>传给 Symbol(..) 的参数是可选的。如果传入了的话，应该是一个为这个 symbol 的用途
给出用户友好描述的字符串。</li> <li>typeof 的输出是一个新的值 (&quot;symbol&quot;)，这是识别 symbol 的首选方法。</li></ul> <p>如果提供了描述的话，它只被用作为这个符号的字符串表示:</p> <blockquote><p>sym.toString(); // &quot;Symbol(some optional description)&quot;</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>符号的主要意义是创建一个类 ( 似 ) 字符串的不会与其他任何值冲突的值。</p></div> <p>可以在对象中直接使用符号作为属性名 / 键值，比如用作一个特殊的想要作为隐藏或者元 属性的属性。尽管通常会这么使用，但是它实际上并不是隐藏的或者无法接触的属性，了 解这一点很重要。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> sy1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">sy1</span><span class="token operator">:</span> <span class="token string">'symbol测试'</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>sy1<span class="token punctuation">,</span> obj<span class="token punctuation">[</span><span class="token string">'sy1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//'symbol测试'  'symbol测试'</span>
</code></pre></div><h3 id="符号注册"><a href="#符号注册" class="header-anchor">#</a> 符号注册</h3> <p>可以通过全局符号注册(global symbol registry) 创建这些符号值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">HappyFace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span> <span class="token string">&quot;instance&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>HappyFace<span class="token punctuation">[</span><span class="token constant">INSTANCE</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> HappyFace<span class="token punctuation">[</span><span class="token constant">INSTANCE</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">smile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 

     <span class="token punctuation">}</span>
    <span class="token keyword">return</span> HappyFace<span class="token punctuation">[</span><span class="token constant">INSTANCE</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">smile</span><span class="token operator">:</span> smile
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token function">HappyFace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
you <span class="token operator">=</span> <span class="token function">HappyFace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>me <span class="token operator">===</span> you<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre></div><p>Symbol.for(..) 在全局符号注册表中搜索，来查看是否有描述文字相同的符号已经存在， 如果有的话就返回它。如果没有的话，会新建一个并将其返回。换句话说，全局注册表把 符号值本身根据其描述文字作为单例处理。</p> <p>但是，这也意味着只要使用的描述名称匹配，可以在应用的任何地方通过 Symbol.for(..) 从注册表中获取这个符号。</p> <p>可以使用 Symbol.keyFor(..) 提取注册符号的描述文本(键值)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Symbol(test)</span>
<span class="token keyword">var</span> dec <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dec<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'test'</span>
<span class="token comment">// 再次从注册中取得符号</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span> dec <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s <span class="token operator">===</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
</code></pre></div><h3 id="作为对象属性的符号"><a href="#作为对象属性的符号" class="header-anchor">#</a> 作为对象属性的符号</h3> <p>如果把符号用作对象的属性 / 键值，那么它会以一种特殊的方式存储，使得这个属性不出
现在对这个对象的一般属性枚举中:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span> <span class="token function">Symbol</span><span class="token punctuation">(</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">baz</span><span class="token operator">:</span> <span class="token boolean">true</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span> o <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [ &quot;foo&quot;,&quot;baz&quot; ]</span>
<span class="token comment">// 要取得对象的符号属性:</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span> o <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [ Symbol(bar) ]</span>
</code></pre></div><blockquote><p>内置符号
S6 支持若干预先定义好的内置符号，它们可以暴露 JavaScript 对象值的各种元特性。但 是，这些符号并不是像一般设想的那样注册在全局符号表里。</p></blockquote> <p>相反，它们作为 Symbol 函数对象的属性保存。比如 2.9 节中介绍的 Symbol.iterator 值:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 原生函数</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/22/2022, 9:02:49 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cyx_blog/bookReading/dont_know_js 02/11-performanceTestingAndTuning.html" class="prev">
        11.性能测试与调优
      </a></span> <span class="next"><a href="/cyx_blog/bookReading/dont_know_js 03/02-codeOrganization.html">
        2.代码组织
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/cyx_blog/assets/js/app.ebd8d218.js" defer></script><script src="/cyx_blog/assets/js/2.080a46d6.js" defer></script><script src="/cyx_blog/assets/js/32.9da046ff.js" defer></script>
  </body>
</html>
